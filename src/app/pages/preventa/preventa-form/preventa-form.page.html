<ion-header [translucent]="true">
  {{clienteIdInput}}
  <ion-toolbar color="main">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Preventa</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form class="formulario" (ngSubmit)="preventaFormSubmit()" [formGroup]="preventaForm">
    <div class="form-group">
      <ion-button expand="block" (click)="abrirClienteModalTable()">
        Seleccionar Cliente
      </ion-button>
    </div>

    
    <div class="form-group">
      <ion-label position="floating"
        >CI/RUC: {{ preventaForm.value.ci }}</ion-label
      >
    </div>
    <div class="form-group">
      <ion-label position="floating"
        >Nombre: {{ preventaForm.value.nombre }}</ion-label
      >
    </div>

    <div class="form-group">
      <ion-label position="floating">Fecha</ion-label>
      <ion-datetime-button datetime="datetime"></ion-datetime-button>

      <ion-modal [keepContentsMounted]="true">
        <ng-template>
          <ion-datetime id="datetime"></ion-datetime>
        </ng-template>
      </ion-modal>
    </div>


    <div class="form-group">
      <ion-label position="floating">Tipo de Venta</ion-label>

      <ion-list>
        <ion-item>
          <ion-select
            aria-label="Tipo de Venta"
            id="tipoVenta"
            formControlName="tipoVenta"
            name="tipoVenta"
            required
          >
            <ion-select-option  value="contado">Contado</ion-select-option>
            <ion-select-option value="credito">Credito</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-list>
    </div>

    <div class="form-group">
      <ion-label position="floating">Forma de Pago </ion-label>
      <ion-list>
        <ion-item>
          <ion-select
            aria-label="Forma de pago"
            id="formaPago"
            formControlName="formaPago"
            name="formaPago"
            required
          >
            <ion-select-option  *ngFor="let formaPago of formaPagoList" 
              value="formaPago">{{formaPago}}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-list>
    </div>
    
    
    <div class="form-group">
      <ion-label position="floating">Observaci√≥n</ion-label>
      <ion-textarea
        formControlName="observacion"
        labelPlacement="floating"
        fill="outline"
        placeholder="Enter text"
      ></ion-textarea>
    </div>    

    <div class="form-group">
      <ion-button expand="block" (click)="abrirProductoModalTabla()">
        Seleccionar Producto
      </ion-button>
    </div>

    <ion-list [inset]="true">
      <ion-item-sliding
        *ngFor="let producto of productos"
        
      >
        <ion-item>
          <div class="unread-indicator-wrapper" slot="start">
            <div class="unread-indicator"></div>
          </div>
          <ion-label>
            <strong>Codigo: {{ producto.codigo }}</strong><br />
            <ion-text
              ><strong>Descripcion: </strong> {{ producto.descripcion
              }}</ion-text
            ><br />
            <ion-text
              ><strong>Cantidad: </strong>{{ producto.cantidad }}
            </ion-text>
            <br />
            <ion-text><strong>Precio: </strong> {{ producto.precio }}</ion-text>
            <br />
            <ion-text
              ><strong>Total: </strong> {{ producto.totalUnitario }}</ion-text
            >
          </ion-label>
        </ion-item>
        <ion-item-options>     
          <ion-item-option (click)="abrirFormProducto(producto)">Actualizar</ion-item-option>    
          <ion-item-option color="danger" (click)="eliminarProductoTabla(producto)">Eliminar</ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>

    <ion-button type="submit" expand="block">Enviar</ion-button>
  </form>
</ion-content>
