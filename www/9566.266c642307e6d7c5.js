"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9566],{9566:(T,g,s)=>{s.r(g),s.d(g,{KeyboardPageModule:()=>M});var f=s(177),m=s(4341),d=s(9203),y=s(8986),u=s(467),h=s(1016),e=s(4438),x=s(1217),k=s(7291);function P(n,r){if(1&n){const i=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(2);return e.Njj(a.handleKey(o))}),e.EFF(1),e.k0s()}if(2&n){const i=r.$implicit;e.R7$(),e.SpI(" ",i," ")}}function K(n,r){if(1&n&&(e.j41(0,"div",4),e.DNE(1,P,2,1,"button",8),e.k0s()),2&n){const i=r.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}const C=[{path:"",component:(()=>{var n;class r{constructor(t,o,a,l){this.toastController=t,this.alertController=o,this.ventaService=a,this.storageService=l,this.activeField=null,this.displayValue="",this.keys=["1","2","3","4","5","6","7","8","9","0"]}ngOnInit(){}setActiveField(t){this.activeField=t}handleKey(t){"Backspace"===t?this.onBackspace():"Enter"===t?this.onEnter():this.addCharacter(t)}addCharacter(t){this.displayValue+=t}createVenta(t,o){var a=this;return(0,u.A)(function*(){try{var l;const c=yield a.storageService.get("LOCAL_HOST"),b=yield a.storageService.get("MAQUINA_ID");if(!b)throw"Maquina no esta disponible";if(!c)throw"HOST LOCAL no esta disponible";const p=yield a.ventaService.createVenta({maquina_id:b,slot_num:parseInt(o)});yield a.showToast("Realice su pago en el POS","success");const v=null==p||null===(l=p.data)||void 0===l?void 0:l.id;"QR"==t?yield h.A.patch(`${c}/vending/${v}/qr`):yield h.A.patch(`${c}/vending/${v}/ux`),console.log()}catch(c){yield a.showToast(c,"danger")}})()}onBackspace(){this.displayValue.length>0&&(this.displayValue=this.displayValue.slice(0,-1))}onEnter(){var t=this;return(0,u.A)(function*(){if(!t.displayValue)return void(yield t.showToast("Ingrese un valor primero","warning"));if(t.displayValue.length>2)return yield t.showToast("Ingrese un valor en el rango permitido","warning"),void(t.displayValue="");const o=t.displayValue;var l;yield(yield t.alertController.create({header:"Confirmar su metodo de pago",message:`\xbfSeleccione su forma de pago, slot seleccionado ${t.displayValue}?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"QR",handler:(l=(0,u.A)(function*(){return yield t.createVenta("QR",o)}),function(){return l.apply(this,arguments)})},{text:"Tarjeta Credito/Debito",handler:function(){var l=(0,u.A)(function*(){return yield t.createVenta("TARJETA",o)});return function(){return l.apply(this,arguments)}}()}]})).present(),t.displayValue=""})()}showToast(t,o){var a=this;return(0,u.A)(function*(){yield(yield a.toastController.create({message:t,duration:2e3,color:o,position:"bottom"})).present()})()}getRows(){return[this.keys.slice(0,3),this.keys.slice(3,6),this.keys.slice(6,9)]}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(d.K_),e.rXU(d.hG),e.rXU(x.s),e.rXU(k.n))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-keyboard"]],decls:16,vars:3,consts:[[3,"translucent"],[1,"display"],[1,"keyboard-container"],["class","keyboard-row",4,"ngFor","ngForOf"],[1,"keyboard-row"],[3,"click"],[1,"special",3,"click"],[1,"special","enter-btn",3,"click"],[3,"click",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Teclado en Pantalla"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",1),e.EFF(6),e.k0s(),e.j41(7,"div",2),e.DNE(8,K,2,1,"div",3),e.j41(9,"div",4)(10,"button",5),e.bIt("click",function(){return o.handleKey("0")}),e.EFF(11,"0"),e.k0s(),e.j41(12,"button",6),e.bIt("click",function(){return o.handleKey("Backspace")}),e.EFF(13,"\u232b"),e.k0s(),e.j41(14,"button",7),e.bIt("click",function(){return o.handleKey("Enter")}),e.EFF(15," \u21b5 "),e.k0s()()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.JRh(o.displayValue||"Ingrese n\xfamero"),e.R7$(2),e.Y8G("ngForOf",o.getRows()))},dependencies:[f.Sq,d.W9,d.eU,d.BC,d.ai],styles:[".display[_ngcontent-%COMP%]{border:2px solid #3880ff;background:#fff;padding:15px;margin:20px;min-height:50px;font-size:24px;text-align:right;border-radius:6px;box-shadow:0 2px 5px #0000001a}.field[_ngcontent-%COMP%]{border:1px solid #ccc;background:#fff;padding:15px;margin:10px;min-height:50px;font-size:18px;text-align:left;border-radius:6px}.field.active[_ngcontent-%COMP%]{border:2px solid #3880ff;background:#e0f0ff}.keyboard-container[_ngcontent-%COMP%]{background:#f0f0f0;padding:15px;border-top:1px solid #ccc;display:flex;flex-direction:column;align-items:center}.keyboard-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:8px 0}button[_ngcontent-%COMP%]{width:70px;height:70px;margin:5px;font-size:22px;border-radius:8px;background:#fff;box-shadow:0 2px 5px #0003;border:none}button.special[_ngcontent-%COMP%]{background:#ff0}.enter-btn[_ngcontent-%COMP%]{background-color:#28a745!important;color:#fff;border-radius:8px;padding:10px 15px;font-size:18px;box-shadow:0 2px 5px #0003}"]}),r})()}];let F=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[y.iI.forChild(C),y.iI]}),r})(),M=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.MD,m.YN,d.bv,F]}),r})()}}]);